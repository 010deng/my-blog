--- 
title: 浏览器缓存机制
date: 2020-02-04
categories: 
 - frontEnd
tags: 
 - cache
---

浏览器的缓存机制大致可以分为以下两点
## 强缓存
其实强缓存非常常见，咱们平时经常见到的刷新0ms就获得数据的，全都是强缓存
它的代表字段有：
* Expires 
* Cache-Control（有许多指令，这里就不再展开了，但主要目的都是说明它的过期时间）

> 在没有过期的时候，所有请求不走后台，直接返回200


## 协商缓存
而协商缓存就不像强缓存那么强制，它是在强缓存过期之后对服务端发起请求来验证更新
代表字段有：
* Last-Modified 和 If-Modified-Since

`Last-Modified`表示本地文件最后修改日期，`If-Modified-Since`会将`Last-Modified`的值发送给服务器，询问服务器在该日期后资源是否有更新，有更新的话就会将新的资源发送回来（200），否则返回 304 状态码
> 其实就是对比`If-Modified-Since`与`Last-Modified`的值是否一致，不一致则说明更新

* ETag 和 If-None-Match

原理与上面的相似，只不过它将时间换成了唯一标识
这样的话可以避免以下两个弊端：
* 如果本地打开缓存文件，即使没有对文件进行修改，但还是会造成 Last-Modified 被修改，服务端不能命中缓存导致发送相同的资源
* 因为 Last-Modified 只能以秒计时，如果在不可感知的时间内修改完成文件，那么服务端会认为资源还是命中了，不会返回正确的资源